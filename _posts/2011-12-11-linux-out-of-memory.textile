---
layout: post
title: linux, out of memory
---

加班归来, 由于纠结了一天, 所以必须把这个给记录下来.

问题是这样的, libvirt启动domain, 大概启动了20台左右, 就会发现domain们会自杀. 我就无比郁闷了, domain你们到底肿么了.

经过多番查看各种log, 没有发现问题. 最后一同事发现了, 在 _/var/log/syslog_ 里面有一条关于 _kvm: out of memory_ 的log.

经过各种搜索后发现, 发现在大内存的工作环境下(>4G), 32位的linux会产生这个错误. 但是我们觉得, 我们平常的机器都是安装64位的OS, 就没有管这个问题了. 但是问题偏偏就出现在这个OS的32位上. 所以阿, 买来的服务器还是要自己安装一次OS才行阿...

最后bs一下卖服务器的厂商...肿么能这么装系统呢, 32位最大才索引4G内存, 一台服务器都40多G内存了.还装32位, 这不坑爹嘛!
